@using Riddle.Web.Models

<div class="space-y-3">
    <!-- Header -->
    <div class="flex items-center justify-between">
        <h3 class="font-bold text-gray-900 dark:text-white flex items-center gap-2">
            <UsersIcon Class="mt-1 h-4 w-4" />
            Party
            <Badge Color="BadgeColor.Gray" Size="BadgeSize.ExtraSmall">@Characters.Count</Badge>
        </h3>
        <div class="flex items-center gap-1">
            @if (ShowInviteButton)
            {
                <button type="button" 
                        class="inline-flex items-center justify-center p-1.5 text-gray-400 hover:text-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"
                        title="Invite players"
                        @onclick="@OnInviteClick">
                    <ShareNodesIcon Class="w-4 h-4" />
                </button>
            }
            @if (ShowImportButton)
            {
                <button type="button" 
                        class="inline-flex items-center justify-center p-1.5 text-gray-400 hover:text-purple-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"
                        title="Import from templates"
                        @onclick="@OnImportClick">
                    <FileImportIcon Class="w-4 h-4" />
                </button>
            }
            <button type="button" 
                    class="inline-flex items-center justify-center p-1.5 text-gray-400 hover:text-green-500 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors"
                    title="Add character"
                    @onclick="@OnAddClick">
                <PlusIcon Class="w-4 h-4" />
            </button>
        </div>
    </div>
    
    <!-- Character Cards -->
    @if (Characters.Any())
    {
        <div class="space-y-2">
            @foreach (var character in Characters)
            {
                <CharacterCard 
                    Character="@character"
                    ShowActions="true"
                    AllowUnclaim="true"
                    OnEdit="@OnEdit"
                    OnRemove="@OnRemove"
                    OnUnclaim="@OnUnclaim" />
            }
        </div>
    }
    else
    {
        <div class="rounded-lg border border-dashed border-gray-300 p-6 text-center dark:border-gray-600">
            <UserCircleIcon Class="mx-auto h-10 w-10 text-gray-400" />
            <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">
                No characters yet
            </p>
            <Button Size="ButtonSize.Small" Color="ButtonColor.Light" Class="mt-3" OnClick="@OnAddClick">
                <PlusIcon Class="h-4 w-4 mr-1" />
                Add First Character
            </Button>
        </div>
    }
</div>

@code {
    [Parameter]
    public List<Character> Characters { get; set; } = [];
    
    [Parameter]
    public EventCallback OnAddClick { get; set; }
    
    [Parameter]
    public EventCallback<Character> OnEdit { get; set; }
    
    [Parameter]
    public EventCallback<Character> OnRemove { get; set; }
    
    [Parameter]
    public bool ShowInviteButton { get; set; }
    
    [Parameter]
    public EventCallback OnInviteClick { get; set; }
    
    [Parameter]
    public EventCallback<Character> OnUnclaim { get; set; }
    
    [Parameter]
    public bool ShowImportButton { get; set; }
    
    [Parameter]
    public EventCallback OnImportClick { get; set; }
}
